# =======================================================================================
# HYPRLAND CONFIGURATION
# https://wiki.hyprland.org/Configuring/
# =======================================================================================

# ---------------------------------------------------------------------------------------
# 1. IMPORTS
# ---------------------------------------------------------------------------------------

# >> Omarchy Defaults (Do not edit these directly)
source = ~/.local/share/omarchy/default/hypr/autostart.conf
source = ~/.local/share/omarchy/default/hypr/bindings/media.conf
source = ~/.local/share/omarchy/default/hypr/bindings/clipboard.conf
source = ~/.local/share/omarchy/default/hypr/bindings/tiling-v2.conf
source = ~/.local/share/omarchy/default/hypr/bindings/utilities.conf
source = ~/.local/share/omarchy/default/hypr/envs.conf
source = ~/.local/share/omarchy/default/hypr/looknfeel.conf
source = ~/.local/share/omarchy/default/hypr/input.conf
source = ~/.local/share/omarchy/default/hypr/windows.conf
source = ~/.config/omarchy/current/theme/hyprland.conf

# >> User Overrides (Edit these files to change your setup)
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/input.conf
source = ~/.config/hypr/bindings.conf
source = ~/.config/hypr/looknfeel.conf
source = ~/.config/hypr/autostart.conf


# ---------------------------------------------------------------------------------------
# 2. NVIDIA CONFIGURATION
# ---------------------------------------------------------------------------------------

# Environment Variables
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm             # CRITICAL: Fixes crashes on launch
env = __GLX_VENDOR_LIBRARY_NAME,nvidia   # Forces OpenGL apps to use NVIDIA driver
env = NVD_BACKEND,direct                 # Stable video decoding for Firefox/Electron

# Cursor Fixes
cursor {
    no_hardware_cursors = true           # Set to 'true' if cursor flickers/disappears
}


# ---------------------------------------------------------------------------------------
# 3. GENERAL SETTINGS
# ---------------------------------------------------------------------------------------

misc {
    # disable_hyprland_logo = true
    # force_default_wallpaper = 0
    # vfr = true
    vrr = 0
}

decoration {
    blur {
        enabled = true
    }
}

# xwayland {
#   force_zero_scaling = true
# }

# Example Window Rules
# windowrulev2 = workspace 5, class:^qemu$


# ---------------------------------------------------------------------------------------
# 4. LAUNCH HOOKS
# ---------------------------------------------------------------------------------------

# Reload Waybar seamlessly whenever Hyprland reloads
exec = pkill waybar && waybar &

# Alternatives (Commented out):
# exec = killall -SIGUSR2 waybar
# exec = sh -c "pkill waybar; sleep 0.5; waybar &"


# Deck Manager - Stream Deck Controller
exec-once = /usr/bin/deckmanager --hidden
